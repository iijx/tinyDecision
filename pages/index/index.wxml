<view class="container">
	 <view class="add-wrap">
		<button class="add-btn" type="mini" size="mini"  bindtap="pageToCreate" type="warn" hover-class="defaultTap">做个决定</button>
	</view> 
	<view class="list-wrap">
		<view class="item1" wx:for="{{list}}" wx:key="item1-{{index}}" wx:for-index="i">
			<view class="date">{{computed.delYear(item.showTime)}}</view>
			<view class="item2" wx:for="{{item.list}}" wx:key="{{item.id}}" wx:for-index="j" 
                bindtap="itemClick" data-i="{{i}}" data-j="{{j}}">
				<view class="left-line" 
                    style="background: {{ computed.isResolved(item.maxLotteryTimes, item.lotteriedTimes) ? '#52c41a': '#ffec3d'}}"></view>
				<view class="question">{{item.question}}</view>
			</view>
		</view>
		<!-- 今天暂无 -->
	</view>

    
</view>

<wxs module="computed">
module.exports.delYear = function(showTime) {
    if(showTime === '今天' || showTime === '昨天') return showTime;
    else return showTime.split('年')[1];
}
module.exports.isResolved = function(maxLotteryTimes, lotteriedTimes) {
    return maxLotteryTimes !== -1 && maxLotteryTimes <= lotteriedTimes;
}
</wxs>